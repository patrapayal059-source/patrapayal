{% extends "base.html" %}
{% block content %}

<h1>ğŸ“š Saved Books</h1>

<form method="get">
    <input type="text" name="search" placeholder="Search book / author / category"
           value="{{ search_query }}">
    <button type="submit">ğŸ” Search</button>
</form>

{% if books_by_category %}
    {% for category, books in books_by_category.items() %}
        <h2>ğŸ“‚ {{ category }} ({{ books|length }})</h2>

        <table border="1" cellpadding="10">
            <tr>
                <th>#</th>
                <th>Book</th>
                <th>Author</th>
                <th>ISBN</th>
                <th>Date</th>
                <th>Action</th>
            </tr>

            {% for book in books %}
            <tr>
                <td>{{ loop.index }}</td>
                <td>{{ book.book_name }}</td>
                <td>{{ book.author }}</td>
                <td>{{ book.isbn or "N/A" }}</td>
                <td>{{ book.date_added }}</td>
                <td>
                    <form method="post"
                          action="{{ url_for('books.delete_book_route', book_id=book.id) }}">
                        <button>ğŸ—‘ Delete</button>
                    </form>
                </td>
            </tr>
            {% endfor %}
        </table>
    {% endfor %}
{% else %}
    <p>ğŸ“­ No saved books found</p>
{% endif %}

{% endblock %}


